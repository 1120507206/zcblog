(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{598:function(t,e,s){"use strict";s.r(e);var a=s(7),v=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"记录一下老项目webpack转为vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#记录一下老项目webpack转为vite"}},[t._v("#")]),t._v(" 记录一下老项目webpack转为vite")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("背景交代：原有项目由vue2+webpack3，编译速度一直非常的*慢*，首次编译时间达到了惊人的50s！，这是不能忍受的，所以我下定决心转变这一现象\n")])])]),e("p",[t._v("1.迁移工作我们使用webpack-to-vite插件进行迁移")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ npx @originjs/webpack-to-vite <project path>\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("or")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ npm install @originjs/webpack-to-vite -g\n$ webpack-to-vite <project path>\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("根据官方文档即可")]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("重新安装依赖 npm i")]),t._v(" "),e("li",[t._v("启动服务 npm run serve")])]),t._v(" "),e("p",[t._v("不出意外，会出现一堆报错，首先是首页白屏，这个好解决，一半是index.html文件位置的问题，将位于根目录下的index.html移动到public 下，并检查里面的连接是否正确")]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[e("p",[t._v("vite.config 配置中把路径配置一下")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://files.catbox.moe/v1ub4w.jpg",alt:"v1ub4w.jpg"}})])]),t._v(" "),e("li",[e("p",[t._v("最坑的来了，vue2 有一个vue-pdf 的插件，在webpack上是能正常使用的，但是转到vite上来死活用不了，这个功能又是必不可少的，网上找了很多办法都没办法解决，最后在google上找到一个平替的插件dy-vite-vue-pdf    ，正常安装依赖，将原来的 vue-pdf 切换成dy-vite-vue-pdf，一切正常")])]),t._v(" "),e("li",[e("p",[e("img",{attrs:{src:"https://files.catbox.moe/vrxcvz.jpg",alt:"vrxcvz.jpg"}})])]),t._v(" "),e("li",[e("p",[t._v("至此，所有工作已经完成，我们来看一下运行时间前后对比")])])]),t._v(" "),e("p",[t._v("webpack："),e("img",{attrs:{src:"https://files.catbox.moe/mhuclc.png",alt:"mhuclc.png"}})]),t._v(" "),e("p",[t._v("vite ："),e("img",{attrs:{src:"https://files.catbox.moe/c76btm.jpg",alt:"c76btm.jpg"}})]),t._v(" "),e("p",[t._v("可以看到，时间由原来的57秒，降低到15秒，节省了42秒，编译速度提升接近4倍 。")])])}),[],!1,null,null,null);e.default=v.exports}}]);